<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pose Recognition - Web Demo</title>
  <style>
    :root {
      --bg: linear-gradient(135deg, #fef3c7 0%, #ffdaa3 100%);
      --surface: rgba(255, 255, 255, 0.95);
      --surface-2: rgba(255, 255, 255, 0.85);
      --border: rgba(0, 0, 0, 0.08);
      --border-2: rgba(0, 0, 0, 0.12);
      --text: #0f172a;
      --muted: #64748b;
      --primary: #f97316;
      --primary-600: #ea580c;
      --accent: #fb923c;
      --accent-2: #fbbf24;
      --success: #16a34a;
    }

    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 0; padding: 40px; padding-top: 140px; background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; box-sizing: border-box; }
    .wrap { display: flex; height: calc(100vh - 180px); gap: 24px; box-sizing: border-box; }
    .navbarSpace { position: fixed; top: 0; left: 0; right: 0; height: 100px; background: transparent; z-index: 100; pointer-events: none; }

    .toolbar { display:flex; gap:12px; align-items:center; margin-bottom:12px; flex-wrap: wrap; }
    button { background: linear-gradient(to right, var(--primary), var(--accent)); color:#fff; border:none; padding:12px 24px; border-radius:26px; cursor:pointer; font-weight:700; font-size:16px; transition: all 0.3s ease; box-shadow: 0 6px 12px rgba(249, 115, 22, 0.3); }
    button:hover { background: linear-gradient(to right, var(--primary-600), var(--primary)); transform: translateY(-3px); box-shadow: 0 10px 20px rgba(249, 115, 22, 0.4); }
    button:active { transform: translateY(0); box-shadow: 0 3px 6px rgba(249, 115, 22, 0.3); }
    button:disabled { opacity:.6; cursor:not-allowed; box-shadow: none; transform: none; }

    select { background: var(--surface); color: var(--text); border:1px solid var(--border-2); padding:10px 12px; border-radius:12px; font-weight:600; }
    select:focus { outline: 2px solid var(--primary); outline-offset: 1px; }

    .row { display:flex; gap:16px; align-items:stretch; flex-wrap: wrap; }

    .guide { flex: 0 0 300px; max-width: 100%; background: var(--surface); backdrop-filter: blur(10px); border:1px solid var(--border); border-radius:20px; padding:12px; box-shadow: 0 8px 20px rgba(0,0,0,.12); }
    .guide h3 { margin:0 0 8px 0; font-size:16px; color: var(--text); font-weight:700; }
    .guide .card { position: relative; width: 100%; aspect-ratio: 1/1; background: linear-gradient(145deg, #f5f5f5, #e6e6e6); border-radius:16px; overflow:hidden; border:1px solid var(--border); }
    .guide canvas { position:absolute; inset:0; width:100%; height:100%; }

    .stage { position: relative; flex: 1 1 600px; min-width: 320px; aspect-ratio: 4/3; background: linear-gradient(145deg, #fafafa, #f5f5f5); border-radius:20px; overflow:hidden; border:1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,.15); }
    video, canvas#canvas { position:absolute; inset:0; width:100%; height:100%; object-fit: cover; }
    video { transform: scaleX(-1); }

    .stats { margin-top: 12px; font-size: 14px; color: var(--text); }
    .pill { display:inline-block; padding:6px 14px; border-radius:999px; background: var(--surface); margin-right:6px; border:1px solid var(--border); color: var(--text); box-shadow: 0 2px 4px rgba(0,0,0,.08); font-weight:600; }

    a { color: var(--primary); text-decoration: none; font-weight:600; }
    a:hover { text-decoration: underline; }
    label.inline { display:flex; align-items:center; gap:6px; }

    .settings { margin-top: 14px; padding: 16px; background: var(--surface); backdrop-filter: blur(10px); border:1px solid var(--border); border-radius:20px; box-shadow: 0 8px 20px rgba(0,0,0,.12); }
    .settings h3 { margin: 0 0 10px 0; font-size: 16px; color: var(--text); font-weight:700; }
    .settings .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .settings label { font-size: 14px; color: var(--muted); font-weight:600; }
    .settings input { background: var(--surface); color: var(--text); border:1px solid var(--border-2); padding:10px 12px; border-radius:12px; width: 120px; font-weight:600; }
    .settings input:focus { outline: 2px solid var(--primary); outline-offset: 1px; }
    .settings .spacer { flex:1; }
    .toast { display:none; margin-left: 8px; color:var(--success); font-weight:700; }
    /* New hero layout */
    .leftPanel { flex: 0 0 30%; display: flex; flex-direction: column; gap: 20px; min-width: 300px; max-width: 400px; }
    .rightPanel { flex: 1; display: flex; flex-direction: column; }
    .hero { background: var(--surface); backdrop-filter: blur(10px); color: var(--text); border-radius:28px; padding:24px; border:1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,.12), 0 10px 20px rgba(0,0,0,.05); display: flex; flex-direction: column; height: 100%; }
    .heroTop { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
    .heroTopRight { display:flex; align-items:center; gap:12px; }
    .iconBtn { position:relative; display:inline-flex; align-items:center; justify-content:center; width:80px; height:80px; border-radius:50%; background: linear-gradient(to right, var(--primary), var(--accent)); color:#fff; border:none; box-shadow: 0 6px 12px rgba(249,115,22,.35); cursor:pointer; transition: all 0.2s ease; }
    .iconBtn:hover { background: linear-gradient(to right, var(--primary-600), var(--primary)); transform: translateY(-2px); box-shadow: 0 6px 12px rgba(249,115,22,.4); }
    .iconBtn.muted { background: linear-gradient(145deg, #9ca3af, #6b7280); color:#fff; }
    .iconBtn.muted::after { content:''; position:absolute; left:50%; top:50%; width:36px; height:4px; background:#ef4444; transform: translate(-50%, -50%) rotate(45deg); border-radius:2px; box-shadow:0 2px 6px rgba(239,68,68,.35); }
    .pillBadge { background: linear-gradient(to right, var(--primary), var(--accent)); color:#fff; padding:14px 24px; border-radius:999px; font-weight:800; font-size: clamp(16px, 2.2vw, 22px); box-shadow: 0 6px 12px rgba(249,115,22,.3); }
    .scoreBadge { background: linear-gradient(to right, #0ea5e9, #06b6d4); color:#fff; padding:12px 20px; border-radius:999px; font-weight:800; font-size: clamp(14px, 1.8vw, 18px); box-shadow: 0 4px 8px rgba(14,165,233,.3); }
    .fitBadge { background: rgba(2,6,23,0.85); color:#f0f9ff; padding:14px 24px; border-radius:999px; font-weight:800; font-size: clamp(18px, 2.5vw, 28px); box-shadow: 0 6px 12px rgba(0,0,0,.3); border: 2px solid rgba(148,163,184,0.5); }
    .levelBadge { background: linear-gradient(to right, #fbbf24, #f59e0b); color:#111827; padding:12px 20px; border-radius:26px; font-weight:700; font-size: clamp(14px, 1.8vw, 16px); box-shadow: 0 4px 8px rgba(251,191,36,.3); cursor:pointer; transition: all 0.2s ease; }
    .levelBadge:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(251,191,36,.4); }
    .heroBody { flex: 1; display:flex; justify-content:center; align-items:center; padding:14px 0; min-height: 0; }
    .heroCircle { width:100%; height:100%; border-radius:20px; background: linear-gradient(145deg, #fafafa, #f5f5f5); display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden; border:1px solid var(--border); box-shadow: inset 0 2px 4px rgba(0,0,0,.05); }
    .heroCircle canvas#heroGuide { position:absolute; top:50%; left:25%; width:50%; height:70%; transform: translate(-50%, -50%); pointer-events:none; }
    .heroDots { display:flex; gap:10px; justify-content:center; margin-top:10px; }
    .heroDot { width:10px; height:10px; border-radius:999px; background: var(--primary); opacity:.8; }
    .heroActions { display:flex; gap:12px; margin-top:20px; flex-shrink: 0; }
    .demoCard { background: var(--surface); backdrop-filter: blur(10px); border-radius:20px; padding:20px; border:1px solid var(--border); box-shadow: 0 8px 20px rgba(0,0,0,.12); flex: 1; display: flex; flex-direction: column; min-height: 0; }
    .demoCard h3 { margin:0 0 16px 0; font-size:18px; color: var(--text); font-weight:800; flex-shrink: 0; }
    .demoCard .anim { position:relative; flex: 1; border-radius:16px; background: linear-gradient(145deg, #fafafa, #f5f5f5); border:1px solid var(--border); overflow:hidden; min-height: 0; }
    .demoCard canvas { position:absolute; inset:0; width:100%; height:100%; }
    .btnPrimary { flex:1; background: linear-gradient(to right, var(--primary), var(--accent)); color:#fff; border:none; padding:14px 20px; border-radius:26px; font-weight:800; font-size:16px; box-shadow: 0 6px 12px rgba(249,115,22,.3); transition: all 0.3s ease; cursor:pointer; }
    .btnPrimary:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(249,115,22,.4); }
    .btnPrimary:active { transform: translateY(0); box-shadow: 0 3px 6px rgba(249,115,22,.3); }
    .btnGhost { flex:1; background: linear-gradient(to right, #e5e7eb, #f3f4f6); color:#111; border:none; padding:14px 20px; border-radius:26px; font-weight:800; font-size:16px; box-shadow: 0 4px 8px rgba(0,0,0,.1); transition: all 0.3s ease; cursor:pointer; }
    .btnGhost:hover { transform: translateY(-3px); box-shadow: 0 8px 16px rgba(0,0,0,.15); }
    .btnGhost:active { transform: translateY(0); box-shadow: 0 2px 4px rgba(0,0,0,.1); }
    .heroTip { text-align:center; color: var(--text); margin:12px 0 0 0; font-size: clamp(24px, 3vw, 32px); font-weight: 800; flex-shrink: 0; letter-spacing: 0.3px; }
    /* Welcome modal */
    .welcomeModal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 2000; background: rgba(0,0,0,.3); backdrop-filter: blur(8px); }
    .welcomeModal.hidden { display: none; }
    .welcomeCard { position: relative; width: min(600px, 90vw); background: #ffffff; border: 4px solid #10b981; border-radius: 24px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,.3), 0 0 0 8px rgba(16,185,129,0.1); animation: welcomeSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
    @keyframes welcomeSlideIn { from { opacity: 0; transform: translateY(-30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
    .welcomeCard h2 { margin: 0 0 20px 0; font-size: clamp(28px, 5vw, 42px); font-weight: 800; color: #10b981; letter-spacing: 0.5px; }
    .welcomeCard .topSection { position: relative; padding-bottom: 20px; }
    .welcomeCard .topSection p { margin: 0; font-size: clamp(18px, 3vw, 22px); line-height: 1.6; color: #374151; font-weight: 500; padding-right: 140px; }
    .welcomeCard .topSection .goBtn { position: absolute; top: 50%; right: 0; transform: translateY(-50%); background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 16px 40px; border-radius: 20px; font-size: 20px; font-weight: 800; box-shadow: 0 6px 20px rgba(16,185,129,.4); cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; }
    .welcomeCard .topSection .goBtn:hover { transform: translateY(-50%) translateY(-3px); box-shadow: 0 10px 30px rgba(16,185,129,.5); background: linear-gradient(135deg, #059669, #047857); }
    .welcomeCard .topSection .goBtn:active { transform: translateY(-50%) translateY(-1px); }
    .welcomeCard .divider { height: 2px; background: linear-gradient(to right, transparent, #10b981, transparent); margin: 32px 0; opacity: 0.4; }
    .welcomeCard .bottomSection { position: relative; padding-top: 12px; }
    .welcomeCard .bottomSection p { margin: 0; font-size: clamp(14px, 2.5vw, 17px); color: #9ca3af; font-weight: 600; font-style: italic; line-height: 1.5; padding-right: 180px; }
    .welcomeCard .bottomSection .skipBtn { position: absolute; top: 50%; right: 0; transform: translateY(-50%); background: linear-gradient(135deg, #e5e7eb, #d1d5db); color: #374151; border: none; padding: 14px 28px; border-radius: 18px; font-size: 16px; font-weight: 700; box-shadow: 0 4px 12px rgba(0,0,0,.15); cursor: pointer; transition: all 0.3s ease; letter-spacing: 0.5px; }
    .welcomeCard .bottomSection .skipBtn:hover { transform: translateY(-50%) translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,.2); background: linear-gradient(135deg, #d1d5db, #9ca3af); }
    .welcomeCard .bottomSection .skipBtn:active { transform: translateY(-50%) translateY(-1px); }
    /* Guide modal with spotlight */
    .guideModal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 2000; }
    .guideModal.hidden { display: none; }
    .guideOverlay { position: absolute; inset: 0; background: rgba(0,0,0,.45); }
    .spotlight { position: absolute; box-shadow: 0 0 0 9999px rgba(0,0,0,.45); border-radius: 24px; pointer-events: none; animation: spotlightPulse 2s ease-in-out infinite; z-index: 2001; }
    @keyframes spotlightPulse { 0%, 100% { box-shadow: 0 0 0 9999px rgba(0,0,0,.45), 0 0 40px 20px rgba(16,185,129,.6), inset 0 0 60px rgba(16,185,129,.3); } 50% { box-shadow: 0 0 0 9999px rgba(0,0,0,.45), 0 0 60px 30px rgba(16,185,129,.8), inset 0 0 80px rgba(16,185,129,.4); } }
    .guideCard { position: relative; width: min(560px, 88vw); background: #ffffff; border: 4px solid #10b981; border-radius: 24px; padding: 36px; box-shadow: 0 20px 60px rgba(0,0,0,.4); z-index: 2002; animation: guideSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
    @keyframes guideSlideIn { from { opacity: 0; transform: translateY(-20px) scale(0.96); } to { opacity: 1; transform: translateY(0) scale(1); } }
    .guideCard h3 { margin: 0 0 18px 0; font-size: clamp(24px, 4.5vw, 36px); font-weight: 800; color: #10b981; letter-spacing: 0.4px; line-height: 1.3; }
    .guideCard p { margin: 0 0 48px 0; font-size: clamp(17px, 2.8vw, 20px); line-height: 1.65; color: #374151; font-weight: 500; }
    .guideCard .nextBtn { position: absolute; bottom: 28px; right: 28px; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 14px 36px; border-radius: 18px; font-size: 19px; font-weight: 800; box-shadow: 0 6px 18px rgba(16,185,129,.4); cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; }
    .guideCard .nextBtn:hover { transform: translateY(-3px); box-shadow: 0 10px 28px rgba(16,185,129,.5); background: linear-gradient(135deg, #059669, #047857); }
    .guideCard .nextBtn:active { transform: translateY(-1px); }
    /* Settings modal */
    .modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal .backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.4); backdrop-filter: blur(4px); }
    .modal .dialog { position: relative; width: min(520px, 92vw); background: var(--surface); backdrop-filter: blur(10px); border:1px solid var(--border); border-radius: 28px; box-shadow: 0 20px 60px rgba(0,0,0,.2); padding: 24px; color: var(--text); }
    .modal h3 { margin: 0 0 16px 0; color: var(--text); font-weight:800; font-size:24px; }
    .modal label { display:block; font-size:15px; color: var(--muted); margin:12px 0 8px; font-weight:600; }
    .modal label.inline { display:inline-flex; align-items:center; gap:8px; margin:12px 0 8px; width:auto; }
    .modal input { width:100%; background: var(--surface-2); color: var(--text); border:1px solid var(--border); padding:12px 14px; border-radius:12px; box-sizing: border-box; font-weight:600; }
    .modal input:focus { outline: 2px solid var(--primary); outline-offset: 1px; }
    .modal .actions { display:flex; gap:12px; justify-content:flex-end; margin-top:20px; }
    .btnMuted { background: linear-gradient(to right, #e5e7eb, #f3f4f6); color:#111; border:none; padding:12px 24px; border-radius:26px; font-weight:700; box-shadow: 0 4px 8px rgba(0,0,0,.1); transition: all 0.2s ease; cursor:pointer; }
    .btnMuted:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,.15); }
    /* Movement cards */
    .cardsWrap { flex: 1; display: flex; flex-direction: column; background: var(--surface); backdrop-filter: blur(10px); border-radius:20px; padding:20px; border:1px solid var(--border); box-shadow: 0 8px 20px rgba(0,0,0,.12); overflow: hidden; min-height: 0; }
    .cardsHeader { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; color: var(--text); flex-shrink: 0; }
    .cardsHeader strong { font-size:18px; font-weight:800; }
    .cardsScroller { display:flex; flex-direction: row; gap:12px; overflow-x:auto; overflow-y: hidden; padding-bottom: 8px; flex: 1; min-height: 0; }
    .cardsScroller::-webkit-scrollbar { height: 8px; }
    .cardsScroller::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 4px; }
    .cardsScroller::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
    .cardMove { background: rgba(249, 115, 22, 0.05); border:1px solid var(--border); border-radius:16px; box-shadow: 0 4px 12px rgba(0,0,0,.08); color: var(--text); transition: all 0.3s ease; cursor:pointer; flex-shrink: 0; min-width: 180px; width: 180px; display: flex; flex-direction: column; padding: 12px; }
    .cardMove:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(249,115,22,.2); }
    .cardMove h4 { margin:0 0 12px 0; font-size:14px; color: var(--text); font-weight:700; text-align: center; flex-shrink: 0; }
    .cardMove .anim { position:relative; aspect-ratio: 1; width: 100%; border-radius:12px; background: linear-gradient(145deg, #fafafa, #f5f5f5); border:1px solid var(--border); overflow:hidden; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
    .cardMove canvas { position:absolute; inset:0; width:100%; height:100%; }
    .cardMove p { margin:12px 0 0 0; font-size:13px; color: var(--text); font-weight:700; line-height:1.4; text-align: center; flex-shrink: 0; }
    .cardMove.active { outline: 3px solid var(--primary); outline-offset:2px; box-shadow: 0 8px 20px rgba(249,115,22,.3); background: rgba(249, 115, 22, 0.1); }
    .cardMove.disabled { cursor: not-allowed; opacity: 0.6; pointer-events: none; }

    /* Celebration toast */
    .celebrate { position: fixed; left:50%; top:50%; transform: translate(-50%, -50%); display:none; align-items:center; justify-content:center; z-index: 9999; pointer-events:none; }
    .celebrate .msg { font-weight:900; font-size: clamp(32px, 5vw, 64px); white-space: nowrap; color: transparent; background: linear-gradient(90deg, #f97316, #fb923c, #fbbf24, #fb923c); -webkit-background-clip: text; background-clip: text; text-shadow: 0 8px 28px rgba(249,115,22,.4); animation: pop 800ms ease forwards; }
    @keyframes pop { 0% { transform: scale(.6); opacity: 0 } 60% { transform: scale(1.08); opacity: 1 } 100% { transform: scale(1); opacity: 1 } }
    .celebrate .spark { position:absolute; width:8px; height:8px; border-radius:999px; background: linear-gradient(45deg, #f97316, #fbbf24); box-shadow:0 0 12px rgba(251,191,36,.9); animation: fly 900ms ease forwards; }
    @keyframes fly { from { transform: translate(0,0); opacity:1 } to { transform: translate(var(--dx), var(--dy)); opacity:0 } }
  </style>
</head>
<body>
  <!-- Welcome Modal -->
  <div id="welcomeModal" class="welcomeModal">
    <div class="welcomeCard">
      <h2>Hello,</h2>
      <div class="topSection">
        <p><strong>beautiful soul!</strong><br><br>
        Welcome!<br>
        Allow me to give you a brief introduction.</p>
        <button id="welcomeGoBtn" class="goBtn">Go!</button>
      </div>
      <div class="divider"></div>
      <div class="bottomSection">
        <p>Not a beginner? Let's head out full of fighting spirit!</p>
        <button id="welcomeSkipBtn" class="skipBtn">Skip Guide</button>
      </div>
    </div>
  </div>

  <!-- Guide Modal - Cards Spotlight -->
  <div id="guideModal" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox" class="spotlight"></div>
    <div class="guideCard">
      <h3>Practice makes perfect!</h3>
      <p>First, let's pick the matching card and start our practice~</p>
      <button id="guideNextBtn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 2 - Demo Spotlight -->
  <div id="guideModal2" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox2" class="spotlight"></div>
    <div class="guideCard">
      <h3>Your reference is right here~</h3>
      <p>Try to match the moves! You're the best!</p>
      <button id="guideNext2Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 3 - Detection Area Spotlight -->
  <div id="guideModal3" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox3" class="spotlight"></div>
    <div class="guideCard">
      <h3>Beautiful moments won't be missed!</h3>
      <p>We'll do our best to capture your adorable movement right here!</p>
      <button id="guideNext3Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 4 - Tip Area Spotlight -->
  <div id="guideModal4" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox4" class="spotlight"></div>
    <div class="guideCard">
      <h3>A bit confused? Don't worry!</h3>
      <p>The move tips are right here—check them anytime!</p>
      <button id="guideNext4Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 5 - Fit Area Spotlight -->
  <div id="guideModal5" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox5" class="spotlight"></div>
    <div class="guideCard">
      <h3>Unsure about your accuracy?</h3>
      <p>No need to doubt — the matching rate will reveal the truth!</p>
      <button id="guideNext5Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 6 - Voice Button Spotlight -->
  <div id="guideModal6" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox6" class="spotlight"></div>
    <div class="guideCard">
      <h3>Sound on?</h3>
      <p>If environment allows, keep it — it makes the interaction better!</p>
      <button id="guideNext6Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 7 - Movement Cards Gesture Control Spotlight -->
  <div id="guideModal7" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox7" class="spotlight"></div>
    <div class="guideCard">
      <h3>Hands-free magic!</h3>
      <p>No need to move back and forth — just <strong style="font-size: 1.25em; color: #10b981;">place your hands on your shoulders</strong>, and the next card will switch automatically.</p>
      <button id="guideNext7Btn" class="nextBtn">Next!</button>
    </div>
  </div>

  <!-- Guide Modal 8 - Play Button Spotlight -->
  <div id="guideModal8" class="guideModal hidden">
    <div class="guideOverlay"></div>
    <div id="spotlightBox8" class="spotlight"></div>
    <div class="guideCard">
      <h3>Got your confidence up?</h3>
      <p>Once you've defeated all the cards, it's time to kick off the real play!</p>
      <button id="guideTryBtn" class="nextBtn">Try it !</button>
    </div>
  </div>

  <!-- Navigation Bar Space (100px reserved for future navbar) -->
  <div class="navbarSpace">
    <!-- Add your navigation bar here -->
  </div>
  
  <div class="wrap">
    <!-- Left Panel: Demo + Cards -->
    <div class="leftPanel">
      <div class="demoCard">
        <h3>Movement demonstration</h3>
        <div class="anim">
          <canvas id="demoCanvas"></canvas>
        </div>
      </div>
      
      <div class="cardsWrap">
        <div class="cardsHeader">
          <strong>Movement cards</strong>
        </div>
        <div class="cardsScroller" id="cardsScroller"></div>
      </div>
      
      <div class="heroActions">
        <button id="heroPlayBtn" class="btnPrimary">▶ Play</button>
      </div>
    </div>

    <!-- Right Panel: Detection Area -->
    <div class="rightPanel">
    <section class="hero">
      <div class="heroTop">
          <div style="display:flex; align-items:center; gap:16px;">
            <div id="moveLabel" class="pillBadge">Please choose movement card</div>
            <div id="fitBadge" class="fitBadge">Fit: 0%</div>
          </div>
        <div id="gameScore" class="scoreBadge" style="display:none">Score: -</div>
        <div class="heroTopRight">
          <button id="voiceBtn" class="iconBtn" title="Voice on/off" aria-label="Voice">
              <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9v6h4l5 4V5L7 9H3z" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 8a5 5 0 010 8" stroke="white" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </button>
            <!-- Setting button hidden -->
            <button id="settingBtn" class="levelBadge" style="display:none !important;">Setting</button>
        </div>
      </div>
      <div class="heroBody">
        <div class="heroCircle" id="heroCircle">
          <video id="video" playsinline></video>
          <canvas id="canvas"></canvas>
          <canvas id="heroGuide"></canvas>
        </div>
      </div>
      
        <div class="heroTip" id="heroTip">Tip:</div>
      </section>
      </div>
    <div class="toolbar" style="display:none">
      <button id="startBtn">Start Camera</button>
      <button id="stopBtn" disabled>Stop</button>
      <button id="trainBtn" disabled>Start Training</button>
      <button id="practiceModeBtn">练习模式</button>
      <button id="scoreModeBtn">计分模式</button>
      <label for="modeSelect">Exercise</label>
      <select id="modeSelect">
        <option value="chin_tuck">Chin Tuck</option>
        <option value="overhead_reach">Overhead Reach</option>
        <option value="side_bend">Side Bend</option>
        <option value="hamstring_hinge">Hamstring Hinge</option>
        <option value="t_pose">T Pose</option>
        <option value="squat_hold">Squat Hold</option>
        <option value="quad_stretch">Quad Stretch</option>
        <option value="y_pose">Y Raise</option>
        <option value="lunge_hold">Lunge Hold</option>
        <option value="high_knee_hold">High Knee Hold</option>
      </select>
      <label for="flowMode">Mode</label>
      <select id="flowMode">
        <option value="manual">Mode 1: Manual</option>
        <option value="auto">Mode 2: Auto Sequence</option>
      </select>
      <label class="inline"><input type="checkbox" id="voiceToggle" checked> Voice</label>
      <span id="status" class="pill">Idle</span>
      <span id="fps" class="pill" style="display:none">FPS: -</span>
      <span id="score" class="pill" style="display:none">Score: -</span>
      <span id="hold" class="pill">Hold: 0.0s / 5s</span>
      <span id="completed" class="pill">Completed: 0/1</span>
    </div>

    <div class="row" style="display:none">
      <div class="stage">
        <video id="video" playsinline></video>
        <canvas id="canvas"></canvas>
      </div>
    </div>

    <div class="stats" id="angles" style="display:none">
      Neck Angle (CVA): <span id="neckAngle">-</span>° ｜ Hip Angle (Shoulder-Hip-Knee): <span id="hipAngle">-</span>° ｜ Torso Tilt: <span id="torsoTilt">-</span>° ｜ Verdict: <span id="verdict">-</span>
    </div>
    <div class="stats" style="margin-top:8px; display:none">
      <div id="holdProgress" style="height:8px; background:rgba(255,255,255,.25); border:1px solid var(--border-2); border-radius:999px; overflow:hidden;">
        <div id="holdProgressFill" style="height:100%; width:0%; background:linear-gradient(90deg, #22d3ee, #818cf8);"></div>
      </div>
    </div>
    <p class="stats" id="tips" style="display:none"></p>
    <div class="settings" style="display:none">
      <h3>Settings</h3>
      <div class="row">
        <label>Hold Duration (s)
          <input id="settingHoldSec" type="number" min="1" max="120" step="1" value="5"></label>
        
        <label><span id="settingPrimaryLabel">Threshold</span>
          <input id="settingPrimary" type="number" step="1" value="55"></label>
        <span class="spacer"></span>
        <button id="saveSettingsBtn">Save Settings</button>
        <button id="resetSettingsBtn">Reset Defaults</button>
        <span id="saveToast" class="toast">Saved</span>
      </div>
    </div>

    <!-- Celebration overlay (anchored within hero to appear over detection area) -->
    <div id="celebrate" class="celebrate"><div class="msg" id="celebrateMsg"></div></div>
    <p class="stats" style="display:none">
      If double-click open fails to load the model, please run a local server: in this folder
      <code>python3 -m http.server 5173</code> then visit <a href="http://localhost:5173" target="_blank">http://localhost:5173</a>.
    </p>
    <!-- Practice settings modal -->
    <div id="settingsModal" class="modal">
      <div class="backdrop"></div>
      <div class="dialog">
        <h3>Practice Settings</h3>
        <label>Hold Duration (seconds)
          <input id="modalHoldSec" type="number" min="1" max="600" step="1"></label>
        
        <!-- Voice toggle moved to top-right speaker button -->
        <div class="actions">
          <button id="modalCancelBtn" class="btnMuted">Cancel</button>
          <button id="modalSaveBtn" class="btnPrimary" style="flex:0 0 auto">Save</button>
        </div>
        
      </div>
    </div>
    <script type="module" src="./main.js?v=82"></script>
  </div>
</body>
</html> 